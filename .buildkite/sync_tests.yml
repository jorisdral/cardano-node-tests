steps:
  - label: 'run the cardano node sync test on Mainnet using a Linux machine'
    commands:
      - nix-shell --run 'python ./sync_tests/node_sync_test.py -t1 $tag_no1 -t2 $tag_no2 -e "mainnet"'
      - './.buildkite/sync_tests_pull.sh'
      - nix-shell --run 'python ./sync_tests/node_write_values_to_db.py -e "mainnet"'
      - './.buildkite/sync_tests_push.sh'
    branches: "sync_tests"
    timeout_in_minutes: 4000
    agents:
      system: x86_64-linux
      queue: benchmark
    artifact_paths:
      - 'logfile.log', 'sync_results.json'
